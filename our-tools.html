<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Our Tools ‚Äì Post45 Data Collective</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/p45dc-fav-icon.jpg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-55e935fd79e5aecefa0dfbe2259d5a95.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-H9Z8DC0X8Q"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-H9Z8DC0X8Q', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Our Tools ‚Äì Post45 Data Collective">
<meta property="og:description" content="">
<meta property="og:image" content="https://data.post45.org/images/bookreconociler-logo-ps-white.png">
<meta property="og:site_name" content="Post45 Data Collective">
<meta property="og:image:height" content="1571">
<meta property="og:image:width" content="2088">
<meta name="twitter:title" content="Our Tools ‚Äì Post45 Data Collective">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://data.post45.org/images/bookreconociler-logo-ps-white.png">
<meta name="twitter:image-height" content="1571">
<meta name="twitter:image-width" content="2088">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Post45 Data Collective</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./our-data.html"> 
<span class="menu-text">Our Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./our-tools.html" aria-current="page"> 
<span class="menu-text">Our Tools</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./submissions.html"> 
<span class="menu-text">Submissions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./people.html"> 
<span class="menu-text">People</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./news.html"> 
<span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Post45-Data-Collective/website"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#bookreconciler-metadata-enrichment-and-work-level-clustering" id="toc-bookreconciler-metadata-enrichment-and-work-level-clustering" class="nav-link active" data-scroll-target="#bookreconciler-metadata-enrichment-and-work-level-clustering">BookReconciler üìòüíé ‚Äî Metadata Enrichment and Work-Level Clustering</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a>
  <ul class="collapse">
  <li><a href="#install-openrefine" id="toc-install-openrefine" class="nav-link" data-scroll-target="#install-openrefine">1. Install OpenRefine</a></li>
  <li><a href="#install-bookreconciler" id="toc-install-bookreconciler" class="nav-link" data-scroll-target="#install-bookreconciler">2. Install BookReconciler</a></li>
  </ul></li>
  <li><a href="#usage" id="toc-usage" class="nav-link" data-scroll-target="#usage">Usage</a></li>
  <li><a href="#customization" id="toc-customization" class="nav-link" data-scroll-target="#customization">Customization</a>
  <ul class="collapse">
  <li><a href="#book-title-matching" id="toc-book-title-matching" class="nav-link" data-scroll-target="#book-title-matching">Book Title Matching</a></li>
  <li><a href="#extend-data-behavior-how-identifiers-are-written-back" id="toc-extend-data-behavior-how-identifiers-are-written-back" class="nav-link" data-scroll-target="#extend-data-behavior-how-identifiers-are-written-back">Extend Data Behavior (how identifiers are written back)</a></li>
  <li><a href="#remove-subtitle-from-titles" id="toc-remove-subtitle-from-titles" class="nav-link" data-scroll-target="#remove-subtitle-from-titles">Remove Subtitle from Titles</a></li>
  <li><a href="#optional-oclc-worldcat-api-keys" id="toc-optional-oclc-worldcat-api-keys" class="nav-link" data-scroll-target="#optional-oclc-worldcat-api-keys">Optional: OCLC / WorldCat API Keys</a></li>
  </ul></li>
  <li><a href="#credit-citation" id="toc-credit-citation" class="nav-link" data-scroll-target="#credit-citation">Credit &amp; Citation</a></li>
  <li><a href="#contributing" id="toc-contributing" class="nav-link" data-scroll-target="#contributing">Contributing</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Our Tools</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="bookreconciler-metadata-enrichment-and-work-level-clustering" class="level1">
<h1>BookReconciler üìòüíé ‚Äî Metadata Enrichment and Work-Level Clustering</h1>
<a class="github-button" href="https://github.com/Post45-Data-Collective/openrefine-reconciliation-service" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star this project on Github">Check out and star this project on Github</a><script async="" defer="" src="https://buttons.github.io/buttons.js"></script>

<hr>
<p><strong>BookReconciler üìòüíé</strong> is a tool that helps you reconcile and enrich bibliographic data from multiple library and knowledge sources:</p>
<ol type="1">
<li><strong>Library of Congress</strong></li>
<li><strong>Google Books</strong></li>
<li><strong>OCLC / WorldCat</strong></li>
<li><strong>HathiTrust</strong></li>
<li><strong>VIAF</strong></li>
<li><strong>Wikidata</strong></li>
</ol>
<p>You can take a spreadsheet with only title and author information, and you can add identifiers like <strong>ISBNs</strong>, <strong>OCLC numbers</strong>, or <strong>HathiTrust Volume IDs</strong>, as well as valuable contextual information like Library of Congress <strong>Subject Headings</strong>, <strong>genres</strong>, <strong>descriptions</strong>, <strong>page counts</strong>, and <strong>dates of first publicatio</strong>n.&nbsp;Additionally, you can find and cluster different editions or manifestations of the same <em>Work</em> (e.g., translations, reprints, etc.).</p>
<p><img src="images/bookreconociler-logo-ps-white.png" class="img-fluid"></p>
<p>The tool currently works as an extension of the software application <strong><a href="https://openrefine.org/">OpenRefine</a></strong>, which makes it accessible to those with and without computational experience. It includes a user-friendly, human-in-the-loop interface for manually evaluating matches, defining <em>Works</em> (e.g., whether to include translations or not), and configuring the behavior of the service (e.g., matching all possible editions or just the best one).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/V9ZJoFowRJM?si=fneEOjEq4s3NNxY9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
<p>The tool can also serve as a <strong>bridge to computational text analysis</strong>. A HathiTrust Volume ID can be used to computationally access the full text (for public domain works) or ‚Äúbags of words‚Äù (for in-copyright works) for any text that is held by the HathiTrust Digital Library. This enable users to move from metadata to full computational text analysis. To learn more about accessing full text with Volume IDs, see the <a href="https://github.com/htrc/htrc-feature-reader?tab=readme-ov-file#usage">HathiTrust Feature Reader</a> Python package.</p>
<hr>
</section>
<section id="installation" class="level1">
<h1>Installation</h1>
<section id="install-openrefine" class="level2">
<h2 class="anchored" data-anchor-id="install-openrefine">1. Install OpenRefine</h2>
<p>BookReconciler üìòüíé is designed to work with <strong>OpenRefine</strong>, an open-source tool for working with messy data.</p>
<ol type="1">
<li>Visit the <a href="https://openrefine.org/download">OpenRefine download page</a>.</li>
<li>Download the latest release for your operating system (Windows, macOS, or Linux).</li>
<li>Unzip the package (if needed) and follow the included instructions to start OpenRefine.</li>
<li>Once running, OpenRefine will be available at:<br>
<a href="http://127.0.0.1:3333/" class="uri">http://127.0.0.1:3333/</a></li>
</ol>
<hr>
</section>
<section id="install-bookreconciler" class="level2">
<h2 class="anchored" data-anchor-id="install-bookreconciler">2. Install BookReconciler</h2>
<p>Choose the installation method that works best for your system:</p>
<details open="">
<summary>
<b>Option 1: Desktop App (Recommended)</b>
</summary>
<p><br></p>
<p>Download and run the standalone desktop app.</p>
<section id="macos-intel-or-apple-silicon" class="level4">
<h4 class="anchored" data-anchor-id="macos-intel-or-apple-silicon"><img src="https://img.shields.io/badge/-MacOS-000000?logo=apple&amp;logoColor=white" height="20"> macOS (Intel or Apple Silicon):</h4>
<ol type="1">
<li><strong><a href="https://github.com/Post45-Data-Collective/openrefine-reconciliation-service/releases/latest">Download the latest macOS app</a></strong></li>
<li>Open the <code>.dmg</code> file and drag <strong>BookReconciler.app</strong> to your Applications folder</li>
<li>Launch <strong>BookReconciler</strong> ‚Äî your browser will automatically open to <a href="http://127.0.0.1:5001/" class="uri">http://127.0.0.1:5001/</a></li>
</ol>
<p><strong>Note:</strong> On first launch, macOS may show a security warning. Right-click the app and select <strong>Open</strong> ‚Üí <strong>Open</strong> to bypass.</p>
</section>
<section id="windows" class="level4">
<h4 class="anchored" data-anchor-id="windows"><img src="https://img.shields.io/badge/-Windows-0078D4?logo=windows&amp;logoColor=white" height="20"> Windows:</h4>
<ol type="1">
<li><strong><a href="https://github.com/Post45-Data-Collective/openrefine-reconciliation-service/releases/latest">Download the latest Windows installer</a></strong> (<code>.exe</code>)</li>
<li>Run the installer and follow the prompts</li>
<li>Launch <strong>BookReconciler</strong> from your Start Menu ‚Äî your browser will automatically open to <a href="http://127.0.0.1:5001/" class="uri">http://127.0.0.1:5001/</a></li>
</ol>
<p><strong>Note:</strong> Windows may show a SmartScreen warning. Click <strong>More info</strong> ‚Üí <strong>Run anyway</strong>.</p>
<p>Once launched, you can access:</p>
<ul>
<li><strong>Configuration interface:</strong> <a href="http://127.0.0.1:5001/" class="uri">http://127.0.0.1:5001/</a></li>
<li><strong>OpenRefine endpoint:</strong> <a href="http://127.0.0.1:5001/api/v1/reconcile" class="uri">http://127.0.0.1:5001/api/v1/reconcile</a></li>
</ul>
<p>You can find more installation options on <a href="https://github.com/Post45-Data-Collective/openrefine-reconciliation-service">GitHub</a>.</p>
<hr>
</section>
</details></section>
</section>
<section id="usage" class="level1">
<h1>Usage</h1>
<ol type="1">
<li><p>Open your dataset/project in OpenRefine.</p></li>
<li><p>Click a column you want to reconcile‚Äîfor example, the book ‚Äútitle‚Äù column.</p></li>
<li><p>Choose <strong>Reconcile ‚Üí Start reconciling‚Ä¶</strong> <img src="images/start-reconciling.png" class="img-fluid"></p></li>
<li><p>Click <strong>Add Standard Service</strong>. <img src="images/add-service.png" class="img-fluid"></p></li>
<li><p>Paste the service URL for BookReconciler, which will connect you with Library of Congress, Wikidata, Google Books, and more:</p>
<pre><code>http://127.0.0.1:5001/api/v1/reconcile</code></pre></li>
<li><p>Select a reconciliation type (e.g., <code>LC_Work_Id</code>, <code>OCLC_Record</code>, <code>HathiTrust</code>, <code>VIAF_Personal</code>, <code>VIAF_Title</code>, <code>Wikidata_Title</code>).</p></li>
<li><p>Optionally, add ‚ÄúAdditional Properties,‚Äù like the author‚Äôs name, which may help improve match performance. <img src="images/additional-properties.png" class="img-fluid"></p></li>
<li><p>Click <strong>Start Reconciling</strong>.</p></li>
<li><p>Wait for reconciliation to complete. This can take seconds to hours depending on the number of values. Then, inspect matches. <img src="images/inspect.png" class="img-fluid"></p></li>
<li><p>Lastly, add new values‚ÄîISBNs, Subject Headings, Descriptions, etc.‚Äîbased on matches. Select Edit Column -&gt; Add columns from reconciled values‚Ä¶ <img src="images/add.png" class="img-fluid"> Choose the values that you want to add from ‚ÄúSuggested Properties‚Äù (possible values are different for each service). <img src="images/add-columns.png" class="img-fluid"> They will be added to the spreadsheet. <img src="images/new-values.png" class="img-fluid"></p></li>
</ol>
<hr>
</section>
<section id="customization" class="level1">
<h1>Customization</h1>
<p>Open <a href="http://127.0.0.1:5001/" class="uri">http://127.0.0.1:5001/</a> to adjust how BookReconciler matches, clusters, and writes back data. No code editing required.</p>
<section id="book-title-matching" class="level3">
<h3 class="anchored" data-anchor-id="book-title-matching">Book Title Matching</h3>
<ul>
<li><p><strong>Single Match Mode</strong><br>
Finds the <em>best single edition</em> (manifestation) of a work.<br>
Good when you care about a specific edition (e.g., a 1950 reprint).<br>
Uses Title + Author (and Publication Year if available).</p></li>
<li><p><strong>Cluster Match Mode</strong><br>
Groups <em>all editions</em> of the same <strong>work</strong> into a cluster (work-level).<br>
Best for gathering as many identifiers as possible or studying works across editions.</p></li>
</ul>
</section>
<section id="extend-data-behavior-how-identifiers-are-written-back" class="level3">
<h3 class="anchored" data-anchor-id="extend-data-behavior-how-identifiers-are-written-back">Extend Data Behavior (how identifiers are written back)</h3>
<ul>
<li><p><strong>Join Mode</strong> ‚Äî all identifiers in one cell, separated by a pipe <code>|</code>.<br>
Example:</p>
<pre><code>123456789 | 987654321 | 192837465 | 564738291</code></pre></li>
<li><p><strong>Row Mode</strong> ‚Äî each identifier in its own row.<br>
Example:</p>
<pre><code>123456789
987654321
192837465
564738291</code></pre></li>
</ul>
</section>
<section id="remove-subtitle-from-titles" class="level3">
<h3 class="anchored" data-anchor-id="remove-subtitle-from-titles">Remove Subtitle from Titles</h3>
<ul>
<li><strong>Keep Subtitles</strong> ‚Äî Titles remain as-is (e.g., <em>Moby-Dick: or, The Whale</em>).</li>
<li><strong>Remove Subtitles</strong> ‚Äî Attempts to strip subtitles (e.g., <em>Moby-Dick</em>).</li>
</ul>
<hr>
</section>
<section id="optional-oclc-worldcat-api-keys" class="level2">
<h2 class="anchored" data-anchor-id="optional-oclc-worldcat-api-keys">Optional: OCLC / WorldCat API Keys</h2>
<p>If you plan to use OCLC‚Äôs protected endpoints, you can input your API keys on the configuration page.</p>
<hr>
</section>
</section>
<section id="credit-citation" class="level1">
<h1>Credit &amp; Citation</h1>
<p>This code is primarily written by <a href="https://thisismattmiller.com/">Matt Miller</a>, with contributions from Melanie Walsh. This project is supported by the Post45 Data Collective. The code is licensed under the <strong>MIT License</strong> (see <a href="LICENSE"><code>LICENSE</code></a> for details).</p>
<p>This project was initially supported by a grant from the National Endowment for the Humanities (NEH), <a href="https://apps.neh.gov/publicquery/AwardDetail.aspx?gn=HAA-301046-24">‚ÄúPost45 Data Collective: Enhancing Cultural Data Documentation, Interoperability, and Reach,‚Äù</a> and led by co-PIs Dan Sinykin and Melanie Walsh. The grant was slated to run from 2024-2026, but it was abruptly cancelled in spring 2025.</p>
<p>If you use this tool, we‚Äôd love to hear from you! You can fill out <a href="https://forms.gle/akbcCGiLvCaDcpWAA">this Google Form</a> or email us.</p>
<p>If you use this tool as part of a publication, you can credit us by citing the following paper:<br>
<a href="https://arxiv.org/abs/2512.10165">‚ÄúBookReconcilerüìòüíé: An Open-Source Tool for Metadata Enrichment and Work-Level Clustering‚Äù</a>.<br>
Matt Miller, Dan Sinykin, and Melanie Walsh. <em>Joint Conference on Digital Libraries</em>, Resources Track.</p>
<p>BibTeX Citation:</p>
<pre><code>@inproceedings{miller-2025-bookreconciler,
  title = {BookReconcilerüìòüíé: An Open-Source Tool for Metadata Enrichment and Work-Level Clustering},
  author = {Miller, Matt and Sinykin, Dan and Walsh, Melanie},
  booktitle = {Joint Conference on Digital Libraries},
  month = dec,
  year = {2025},
  publisher = {ACM/IEEE},
}</code></pre>
<hr>
</section>
<section id="contributing" class="level1">
<h1>Contributing</h1>
<p>In the near term, maintenance of this tool will be supported by the Post45 Data Collective. However, to grow and sustain this project, we strongly welcome and encourage contributions from the broader community (or funding :D ).</p>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/data\.post45\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p style="color:white">
Supported by <a href="https://www.neh.gov"><img src="https://www.neh.gov/sites/default/files/styles/background_hero_ultra_large_2600/public/2024-10/NEH%20Seal%20with%20Full%20Name%20-%20Inversed%20Color.png" class="img-fluid" alt="National Endowment for the Humanities" width="75"></a> <a href="https://digitalscholarship.emory.edu/"><img src="https://www.jhrehab.org/wp-content/uploads/2023/10/Data-Center-ecds-logo.png?w=640" class="img-fluid" alt="Emory Center for Digital Scholarship" width="75"></a> Built with <a href="https://quarto.org/"><img src="https://raw.githubusercontent.com/github/explore/80f119e965a9a3df7b74c3f7b63a502e3d0ded36/topics/quarto/quarto.png" class="img-fluid" alt="Quarto" width="65"></a>
</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>